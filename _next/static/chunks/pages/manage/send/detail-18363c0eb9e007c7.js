(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3894],{94573:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/send/detail",function(){return s(76671)}])},76671:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSG:function(){return j}});var t=s(26042),c=s(69396),i=s(85893),d=s(60228),l=s(67294),a=s(94281),r=s(11163),o=s(63926),u=s(47398),h=s(88674),m=s(94086),v=s(9824),f=s(9669),x=s.n(f),p={title:"\ubc1c\uc1a1 \uc0c1\uc138\ubcf4\uae30",wrapperClass:"send-list",contentsClass:"send",isAside:!0,titleGroup:{sTitle:"\ubc1c\uc1a1 \uc0c1\uc138\ubcf4\uae30",gradient:!1,locationList:[{name:"\ubb38\uc790 \ubc1c\uc1a1\ub0b4\uc5ed",href:"/manage/send"},{name:"\ubc1c\uc1a1 \uc0c1\uc138\ubcf4\uae30"}]}},j=!0;n.default=function(e){var n,s,f,j=e.sndMessageFail,g=(0,r.useRouter)(),N=(0,l.useState)({}),k=N[0],b=N[1],C=(0,l.useState)(new Set),y=C[0],S=C[1],w=(0,l.useState)(new Set),_=w[0],T=w[1],F=(0,l.useState)(new Set),L=F[0],M=F[1],A=(0,l.useState)(!1),P=A[0],q=A[1],I=(0,l.useState)(!1),R=I[0],E=I[1],G=(0,l.useState)(!1),H=G[0],z=G[1],D=(0,l.useState)([]),O=D[0],Z=D[1],K=(0,l.useState)([]),Y=K[0],U=K[1],X=(0,l.useState)([]),B=X[0],J=X[1],Q=(0,l.useState)(!1),V=Q[0],W=Q[1],$=(0,l.useState)(""),ee=$[0],ne=$[1],se=(0,l.useState)([]),te=se[0],ce=se[1],ie=(0,l.useState)([]),de=ie[0],le=ie[1],ae=(0,l.useState)([]),re=ae[0],oe=ae[1],ue=(0,v.aF)().user;(0,l.useEffect)((function(){g.isReady&&void 0!==g.query.no&&u.Z.get("/api/fo/send/history/message/".concat(g.query.no)).then((function(e){if(null!==e){b(e);var n,s=-1,i=Object.values(e.sndMessageFail);n=j.map((function(e){return++s,(0,c.Z)((0,t.Z)({},e),{count:i[s]})})),U(n),Z([{cd:"s1",cdNm:"\ubc1c\uc1a1\uc131\uacf5",count:e.sndComplateCnt}]),J([{cd:"p1",cdNm:"\uacb0\uacfc\ud655\uc778\uc911",count:e.sndRequestCnt}]),ce(e.addrGrpNmList)}}))}),[g,g.isReady,g.query.no,j]);var he=function(e,n,s){if("success"===s){var t=new Set(y);n?t.add(e):!n&&t.has(e)&&t.delete(e),S(t),me(t,s)?q(!0):q(!1)}else if("fail"===s){var c=new Set(_);n?c.add(e):!n&&c.has(e)&&c.delete(e),T(c),me(c,s)?E(!0):E(!1)}else if("pending"===s){var i=new Set(L);n?i.add(e):!n&&i.has(e)&&i.delete(e),M(i),me(i,s)?z(!0):z(!1)}},me=function(e,n){var s=0;return"success"===n?(O.map((function(e){e.count>0&&++s})),0!==s&&e.size===s):"fail"===n?(Y.map((function(e){e.count>0&&++s})),0!==s&&e.size===s):"pending"===n?(B.map((function(e){e.count>0&&++s})),0!==s&&e.size===s):void 0},ve=function(e,n){"success"===n?(q(e),S(e?new Set(O.filter((function(e){return e.count>0})).map((function(e){return e.cd}))):new Set)):"fail"===n?(E(e),T(e?new Set(Y.filter((function(e){return e.count>0})).map((function(e){return e.cd}))):new Set)):"pending"===n&&(z(e),M(e?new Set(B.filter((function(e){return e.count>0})).map((function(e){return e.cd}))):new Set))},fe=function(){var e=[];return P&&e.push("MTC"),R&&e.push("MTF"),H&&e.push("MTN"),e};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.AU,{pageInfo:p,children:[(0,i.jsxs)("div",{className:"cont d-flex",children:[(0,i.jsxs)("div",{className:"form form-box",children:[(0,i.jsxs)("h5",{className:"mt-0",children:[(0,i.jsx)("span",{className:"ico ico-info"}),"\ubc1c\uc1a1 \ub0b4\uc5ed \uc0c1\uc138"]}),(0,i.jsxs)("dl",{className:"form-list",children:[(0,i.jsx)("dt",{className:"label",children:"\uc81c\ubaa9"}),(0,i.jsx)("dd",{className:"date",children:(null===k||void 0===k?void 0:k.msgTtl)?null===k||void 0===k?void 0:k.msgTtl:"-"}),(0,i.jsx)("dt",{className:"label",children:"\ubc1c\uc1a1\uc77c\uc2dc"}),(0,i.jsx)("dd",{className:"date",children:(null===k||void 0===k?void 0:k.sndStartDtt)&&(0,o.Z)(new Date(null===k||void 0===k?void 0:k.sndStartDtt),"yyyy-MM-dd HH:mm")}),(0,i.jsx)("dt",{children:"\ubc1c\uc2e0\ubc88\ud638"}),(0,i.jsx)("dd",{children:(null===k||void 0===k?void 0:k.snPhnum)&&(0,h.kA)(null===k||void 0===k?void 0:k.snPhnum)}),(0,i.jsx)("dt",{children:"\uc218\uc2e0\uadf8\ub8f9"}),(0,i.jsx)("dd",{className:"text",children:null===k||void 0===k||null===(n=k.addrGrpNmList)||void 0===n?void 0:n.map((function(e,n){var s;return(0,i.jsxs)("a",{href:"#",onClick:function(n){n.preventDefault(),ne(e),W(!0)},children:[e,n===(null===k||void 0===k||null===(s=k.addrGrpNmList)||void 0===s?void 0:s.length)-1?"":", "]},"group".concat(n))}))}),(0,i.jsx)("dt",{children:"\uc720\ud615"}),(0,i.jsx)("dd",{children:null===k||void 0===k?void 0:k.svcKndCdNm}),(0,i.jsx)("dt",{children:"\ubc1c\uc1a1\uc694\uccad\uac74"}),(0,i.jsxs)("dd",{children:[null===k||void 0===k?void 0:k.sndCnt,"\uac74"]}),(0,i.jsx)("dt",{children:"\uc131\uacf5\uac74\uc218"}),(0,i.jsxs)("dd",{children:[null===k||void 0===k?void 0:k.sndComplateCnt,"\uac74"]}),(0,i.jsx)("dt",{children:"\uc2e4\ud328\uac74\uc218"}),(0,i.jsxs)("dd",{children:[null===k||void 0===k?void 0:k.sndFailCnt,"\uac74"]}),(0,i.jsx)("dt",{children:"\ub300\uae30\uac74\uc218"}),(0,i.jsxs)("dd",{children:[null===k||void 0===k?void 0:k.sndRequestCnt,"\uac74"]}),(0,i.jsx)("dt",{children:"\ubc1c\uc1a1\uc694\uae08"}),(0,i.jsxs)("dd",{children:[null===(null===k||void 0===k?void 0:k.sndPrice)?0:null===k||void 0===k||null===(s=k.sndPrice)||void 0===s?void 0:s.toLocaleString(),"\uc6d0"]})]})]}),(0,i.jsx)("div",{className:"phone sm",children:(0,i.jsx)("div",{className:"box-bg",children:(0,i.jsxs)("div",{className:"box",children:[(0,i.jsxs)("div",{className:"head",children:[(0,i.jsx)("span",{className:"arrow"}),(0,i.jsx)("span",{className:"tit",children:(null===k||void 0===k?void 0:k.snPhnum)&&(0,h.kA)(null===k||void 0===k?void 0:k.snPhnum)}),(0,i.jsx)("span",{className:"tag",children:null===k||void 0===k?void 0:k.svcKndCdNm})]}),(0,i.jsxs)("div",{className:"body",children:[("LMS"===(null===k||void 0===k?void 0:k.svcKndCdNm)||"MMS"===(null===k||void 0===k?void 0:k.svcKndCdNm))&&(null===k||void 0===k?void 0:k.msgTtl.length)>0&&(0,i.jsx)("div",{className:"tit",children:null===k||void 0===k?void 0:k.msgTtl}),(0,i.jsxs)("div",{className:"txt",children:["Y"===(null===k||void 0===k?void 0:k.adIncluYn)&&(0,i.jsxs)(i.Fragment,{children:["(\uad11\uace0) ",null===k||void 0===k?void 0:k.entprNm,(0,i.jsx)("br",{}),(0,i.jsx)("br",{})]}),null===k||void 0===k?void 0:k.msgCotn,"Y"===(null===k||void 0===k?void 0:k.adIncluYn)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\ubb34\ub8cc\uac70\ubd80 080-880-2501",(0,i.jsx)("br",{}),"\uc778\uc99d\ucf54\ub4dc ",null===ue||void 0===ue?void 0:ue.mbIdno]})]}),(0,i.jsx)("div",{className:"img",children:(null===k||void 0===k||null===(f=k.messageHistoryFileList)||void 0===f?void 0:f.length)>0&&k.messageHistoryFileList.map((function(e,n){return(0,i.jsx)(m.T,{src:e.flId?"https://d31lddst562gwa.cloudfront.net"+e.flPath:e.src,alt:e.flId?e.flNm:e.name,unoptimized:!0},n)}))})]})]})})})]}),(0,i.jsxs)("div",{className:"form-box",children:[(0,i.jsxs)("h5",{children:[(0,i.jsx)("span",{className:"ico ico-info"}),"\uacb0\uacfc\uac12 \uc0c1\uc138\ub0b4\uc5ed"]}),(0,i.jsxs)("div",{className:"check-list-wrap",children:[(0,i.jsx)("button",{className:"btn btn-sm outline-dark w-100 all-check ".concat(P&&R&&H?"active":""),onClick:function(){P&&R&&H?(ve(!1,"success"),ve(!1,"fail"),ve(!1,"pending")):(ve(!0,"success"),ve(!0,"fail"),ve(!0,"pending"))},children:"\uc804\uccb4\uc120\ud0dd"}),(0,i.jsxs)("ul",{className:"list",children:[(0,i.jsxs)("li",{children:[(0,i.jsxs)("div",{className:"fir bg-blue-light form-check",children:[(0,i.jsx)("input",{type:"checkbox",id:"chk02_00",className:"group-check",checked:P,onChange:function(e){return ve(e.target.checked,"success")}}),(0,i.jsxs)("label",{htmlFor:"chk02_00",className:"chk-line txt-white",children:["\ubc1c\uc1a1\uc131\uacf5 ",(0,i.jsxs)("span",{className:"num",children:[null===k||void 0===k?void 0:k.sndComplateCnt,"\uac74"]})]})]}),O.map((function(e,n){return(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{type:"checkbox",id:"chk02_0".concat(n+1),checked:e.count>0?y.has(e.cd):"",onChange:function(n){he(e.cd,n.target.checked,"success")}}),(0,i.jsxs)("label",{htmlFor:"chk02_0".concat(n+1),className:"chk-line",children:[e.cdNm," ",(0,i.jsxs)("span",{className:"num",children:[e.count,"\uac74"]})]})]},"chk02_0".concat(n+1))}))]}),(0,i.jsxs)("li",{children:[(0,i.jsxs)("div",{className:"fir bg-red-light form-check",children:[(0,i.jsx)("input",{type:"checkbox",id:"chk03_00",className:"group-check",checked:R,onChange:function(e){return ve(e.target.checked,"fail")}}),(0,i.jsxs)("label",{htmlFor:"chk03_00",className:"chk-line txt-gray-900",children:["\ubc1c\uc1a1\uc2e4\ud328 ",(0,i.jsxs)("span",{className:"num",children:[null===k||void 0===k?void 0:k.sndFailCnt,"\uac74"]})]})]}),Y.map((function(e,n){return(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{type:"checkbox",id:"chk03_0".concat(n+1),checked:e.count>0?_.has(e.cd):"",onChange:function(n){he(e.cd,n.target.checked,"fail")}}),(0,i.jsxs)("label",{htmlFor:"chk03_0".concat(n+1),className:"chk-line",children:[e.cdNm," ",(0,i.jsxs)("span",{className:"num",children:[e.count,"\uac74"]})]})]},"chk03_".concat(n+1))}))]}),(0,i.jsxs)("li",{children:[(0,i.jsxs)("div",{className:"fir bg-gray-200 form-check",children:[(0,i.jsx)("input",{type:"checkbox",id:"chk01_00",className:"group-check",checked:H,onChange:function(e){return ve(e.target.checked,"pending")}}),(0,i.jsxs)("label",{htmlFor:"chk01_00",className:"chk-line txt-gray-900",children:["\uacb0\uacfc\ud655\uc778\uc911 ",(0,i.jsxs)("span",{className:"num",children:[null===k||void 0===k?void 0:k.sndRequestCnt,"\uac74"]})]})]}),B.map((function(e,n){return(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{type:"checkbox",id:"chk01_0".concat(n+1),checked:e.count>0?L.has(e.cd):"",onChange:function(n){he(e.cd,n.target.checked,"pending")}}),(0,i.jsxs)("label",{htmlFor:"chk01_0".concat(n+1),className:"chk-line",children:[e.cdNm," ",(0,i.jsxs)("span",{className:"num",children:[e.count,"\uac74"]})]})]},"chk01_0".concat(n+1))}))]})]}),(0,i.jsxs)("div",{className:"btn-wrap d-flex between",children:[(0,i.jsx)("button",{className:"btn btn-sm2 outline-green-light txt-green-light",onClick:function(){var e=0;if(P||R||H){P&&(e+=O[0].count);var n=!0,s=!1,t=void 0;try{for(var c,i=function(){var n=c.value;e+=Y.find((function(e){return e.cd===n})).count},d=_.values()[Symbol.iterator]();!(n=(c=d.next()).done);n=!0)i()}catch(l){s=!0,t=l}finally{try{n||null==d.return||d.return()}finally{if(s)throw t}}H&&(e+=B[0].count)}else e=O[0].count+Y.reduce((function(e,n){return e+n.count}),0)+B[0].count;e>1e5?window.AlertInfo({message:"\ucd1d \ub0b4\uc5ed\uc774 10\ub9cc\uac74 \ucd08\uacfc\uc778 \uacbd\uc6b0 \uc5d1\uc140 \ub2e4\uc6b4\ub85c\ub4dc\uac00 \ubd88\uac00\ud569\ub2c8\ub2e4.<br />\uace0\uac1d\uc13c\ud130\ub85c \ubb38\uc758\ud558\uc2dc\uba74 \ud544\uc694\ud55c \ub0b4\uc5ed\uc744 \uc81c\uacf5\ud574 \ub4dc\ub9bd\ub2c8\ub2e4."}):u.Z.get("/api/fo/send/history/message/receiver/excel/".concat(g.query.no)).then((function(e){if(null===e||void 0===e?void 0:e.error){if(e.error){var n={message:e.error,btn:[{name:"\ud655\uc778",css:"bg-primary"}]};window.AlertInfo(n)}}else{var s=e.split("/");x()({url:"https://d31lddst562gwa.cloudfront.net"+e,method:"GET",responseType:"blob"}).then((function(e){var n=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=n,t.setAttribute("download",s.pop()),document.body.appendChild(t),t.click()}))}}))},children:"\uc5d1\uc140 \ub2e4\uc6b4\ub85c\ub4dc"}),(0,i.jsxs)("div",{className:"right",children:[(0,i.jsx)("button",{className:"btn btn-sm2 outline-dark",onClick:function(){return function(){var e;e={sendType:"message",subText:!0,subtxtTrsmPhnum:null===k||void 0===k?void 0:k.snPhnum,subtxtTtl:null===k||void 0===k?void 0:k.msgTtl,subtxtCotn:null===k||void 0===k?void 0:k.msgCotn,messageHistoryFileList:null===k||void 0===k?void 0:k.messageHistoryFileList,reSendReceiver:{msgGrpNo:g.query.no,sndStsCdList:0===fe().length&&0===Array.from(_).length?["MTC","MTF","MTN"]:fe(),errorCdList:0===Array.from(_).length?[""]:Array.from(_)},errorCdList:Array.from(_),sndStsCdList:fe()},sessionStorage.setItem("reSendData",JSON.stringify(e)),g.push("/service")}()},children:"\uc7ac\ubc1c\uc1a1\ud558\uae30"}),(0,i.jsx)("button",{className:"btn btn-sm2 outline-dark",onClick:function(){return oe(fe()),le(Array.from(_)),void W(!0)},children:"\uc120\ud0dd\ud55c \ub9ac\uc2a4\ud2b8\ubcf4\uae30"})]})]})]})]})]}),(0,i.jsx)(a.a,{show:V,onClose:function(){W(!1),ne(""),oe([]),le([])},info:{title:"\ub9ac\uc2a4\ud2b8 \ubcf4\uae30",id:"listModal",size:"modal-lg"},sendType:"message",msgGrpNo:g.query.no,groupList:te,groupName:ee,sndStsCdArr:re,errorCd:de,sndFailCd:j})]})}}},function(e){e.O(0,[3326,9774,2888,179],(function(){return n=94573,e(e.s=n);var n}));var n=e.O();_N_E=n}]);